import{b1 as S,al as M,bq as N,br as w,U as R,l as j,z as H,bs as z,a_ as A,a$ as q,j as O,a7 as x,bt as G,bj as J,A as Q,D as X,v as V,q as Y,aP as Z,E as K,bu as k,g as I,bv as aa,bw as ea,bx as ta}from"./CDW9pQro.js";const na={trailing:!0};function ra(a,e=25,s={}){if(s={...na,...s},!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let i,r,f=[],n,t;const c=(_,h)=>(n=sa(a,_,h),n.finally(()=>{if(n=null,s.trailing&&t&&!r){const m=c(_,t);return t=null,m}}),n),v=function(..._){return s.trailing&&(t=_),n||new Promise(h=>{const m=!r&&s.leading;clearTimeout(r),r=setTimeout(()=>{r=null;const l=s.leading?i:c(this,_);t=null;for(const D of f)D(l);f=[]},e),m?(i=c(this,_),h(i)):f.push(h)})},o=_=>{_&&(clearTimeout(_),r=null)};return v.isPending=()=>!!r,v.cancel=()=>{o(r),f=[],t=null},v.flush=()=>{if(o(r),!t||n)return;const _=t;return t=null,c(this,_)},v}async function sa(a,e,s){return await a.apply(e,s)}const oa=Symbol.for("nuxt:client-only"),P="<div></div>",T=new WeakMap;function _a(a){if(T.has(a))return T.get(a);const e={...a};return e.render?e.render=(s,i,r,f,n,t)=>{if(f.mounted$??s.mounted$){const c=a.render?.bind(s)(s,i,r,f,n,t);return c.children===null||typeof c.children=="string"?S(c):M(c)}return N(s._.vnode.el,P)}:e.template&&=`
      <template v-if="mounted$">${a.template}</template>
      <template v-else>${P}</template>
    `,e.setup=(s,i)=>{const r=w(),f=R(r.isHydrating===!1),n=j();if(r.isHydrating){const c={...n.attrs},v=ia(n);for(const o in c)delete n.attrs[o];H(()=>{Object.assign(n.attrs,c),n.vnode.dirs=v})}H(()=>{f.value=!0});const t=a.setup?.(s,i)||{};return z(t)?Promise.resolve(t).then(c=>typeof c!="function"?(c||={},c.mounted$=f,c):(...v)=>{if(f.value||!r.isHydrating){const o=c(...v);return o.children===null||typeof o.children=="string"?S(o):M(o)}return N(n?.vnode.el,P)}):typeof t=="function"?(...c)=>{if(f.value){const v=t(...c),o=e.inheritAttrs!==!1?i.attrs:void 0;return v.children===null||typeof v.children=="string"?S(v,o):M(v,o)}return N(n?.vnode.el,P)}:Object.assign(t,{mounted$:f})},T.set(a,e),e}function ia(a){if(!a||!a.vnode.dirs)return null;const e=a.vnode.dirs;return a.vnode.dirs=null,e}function va(...a){const e=typeof a[a.length-1]=="string"?a.pop():void 0;ca(a[0],a[1])&&a.unshift(e);let[s,i,r={}]=a,f=!1;const n=O(()=>x(s));if(typeof n.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof i!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const t=w();r.server??=!0,r.default??=ua,r.getCachedData??=U,r.lazy??=!1,r.immediate??=!0,r.deep??=G.deep,r.dedupe??="cancel",r._functionName,t._asyncData[n.value];function c(){const l={cause:"initial",dedupe:r.dedupe};return t._asyncData[n.value]?._init||(l.cachedData=r.getCachedData(n.value,t,{cause:"initial"}),t._asyncData[n.value]=$(t,n.value,i,r,l.cachedData)),()=>t._asyncData[n.value].execute(l)}const v=c(),o=t._asyncData[n.value];o._deps++;const _=r.server!==!1&&t.payload.serverRendered;{let l=function(d){const u=t._asyncData[d];u?._deps&&(u._deps--,u._deps===0&&u?._off())};const D=j();if(D&&_&&r.immediate&&!D.sp&&(D.sp=[]),D&&!D._nuxtOnBeforeMountCbs){D._nuxtOnBeforeMountCbs=[];const d=D._nuxtOnBeforeMountCbs;J(()=>{d.forEach(u=>{u()}),d.splice(0,d.length)}),Q(()=>d.splice(0,d.length))}const p=D&&(D._nuxtClientOnly||X(oa,!1));_&&t.isHydrating&&(o.error.value||o.data.value!==void 0)?o.status.value=o.error.value?"error":"success":D&&(!p&&t.payload.serverRendered&&t.isHydrating||r.lazy)&&r.immediate?D._nuxtOnBeforeMountCbs.push(v):r.immediate&&o.status.value!=="success"&&v();const y=A(),b=V(n,(d,u)=>{if((d||u)&&d!==u){f=!0;const B=t._asyncData[u]?.data.value!==void 0,W=t._asyncDataPromises[u]!==void 0,F={cause:"initial",dedupe:r.dedupe};if(!t._asyncData[d]?._init){let C;u&&B?C=t._asyncData[u].data.value:(C=r.getCachedData(d,t,{cause:"initial"}),F.cachedData=C),t._asyncData[d]=$(t,d,i,r,C)}t._asyncData[d]._deps++,u&&l(u),(r.immediate||B||W)&&t._asyncData[d].execute(F),ta(()=>{f=!1})}},{flush:"sync"}),g=r.watch?V(r.watch,()=>{f||t._asyncData[n.value]?._execute({cause:"watch",dedupe:r.dedupe})}):()=>{};y&&q(()=>{b(),g(),l(n.value)})}const h={data:E(()=>t._asyncData[n.value]?.data),pending:E(()=>t._asyncData[n.value]?.pending),status:E(()=>t._asyncData[n.value]?.status),error:E(()=>t._asyncData[n.value]?.error),refresh:(...l)=>t._asyncData[n.value]?._init?t._asyncData[n.value].execute(...l):c()(),execute:(...l)=>h.refresh(...l),clear:()=>{const l=t._asyncData[n.value];if(l?._abortController)try{l._abortController.abort(new DOMException("AsyncData aborted by user.","AbortError"))}finally{l._abortController=void 0}L(t,n.value)}},m=Promise.resolve(t._asyncDataPromises[n.value]).then(()=>h);return Object.assign(m,h),m}function E(a){return O({get(){return a()?.value},set(e){const s=a();s&&(s.value=e)}})}function ca(a,e){return!(typeof a=="string"||typeof a=="object"&&a!==null||typeof a=="function"&&typeof e=="function")}function Da(a){const e=w();if(a in e.payload.data||(e.payload.data[a]=void 0),e._asyncData[a]){const s=e._asyncData[a];s._deps++,A()&&q(()=>{s._deps--,s._deps===0&&s?._off()})}return{data:O({get(){return e._asyncData[a]?.data.value??e.payload.data[a]},set(s){e._asyncData[a]?e._asyncData[a].data.value=s:e.payload.data[a]=s}})}}async function ya(a){await new Promise(s=>aa(s));const e=a?ea(a):void 0;await w().hooks.callHookParallel("app:data:refresh",e)}function L(a,e){e in a.payload.data&&(a.payload.data[e]=void 0),e in a.payload._errors&&(a.payload._errors[e]=void 0),a._asyncData[e]&&(a._asyncData[e].data.value=I(a._asyncData[e]._default()),a._asyncData[e].error.value=void 0,a._asyncData[e].status.value="idle"),e in a._asyncDataPromises&&(a._asyncDataPromises[e]=void 0)}function la(a,e){const s={};for(const i of e)s[i]=a[i];return s}function $(a,e,s,i,r){a.payload._errors[e]??=void 0;const f=i.getCachedData!==U,n=s,t=i.deep?Y:R,c=r!==void 0,v=a.hook("app:data:refresh",async _=>{(!_||_.includes(e))&&await o.execute({cause:"refresh:hook"})}),o={data:t(c?r:i.default()),pending:O(()=>o.status.value==="pending"),error:Z(a.payload._errors,e),status:R("idle"),execute:(..._)=>{const[h,m=void 0]=_,l=h&&m===void 0&&typeof h=="object"?h:{};if(a._asyncDataPromises[e]&&(l.dedupe??i.dedupe)==="defer")return a._asyncDataPromises[e];{const y="cachedData"in l?l.cachedData:i.getCachedData(e,a,{cause:l.cause??"refresh:manual"});if(y!==void 0)return a.payload.data[e]=o.data.value=y,o.error.value=void 0,o.status.value="success",Promise.resolve(y)}o._abortController&&o._abortController.abort(new DOMException("AsyncData request cancelled by deduplication","AbortError")),o._abortController=new AbortController,o.status.value="pending";const D=new AbortController,p=new Promise((y,b)=>{try{const g=l.timeout??i.timeout,d=da([o._abortController?.signal,l?.signal],D.signal,g);if(d.aborted){const u=d.reason;b(u instanceof Error?u:new DOMException(String(u??"Aborted"),"AbortError"));return}return d.addEventListener("abort",()=>{const u=d.reason;b(u instanceof Error?u:new DOMException(String(u??"Aborted"),"AbortError"))},{once:!0,signal:D.signal}),Promise.resolve(n(a,{signal:d})).then(y,b)}catch(g){b(g)}}).then(async y=>{let b=y;i.transform&&(b=await i.transform(y)),i.pick&&(b=la(b,i.pick)),a.payload.data[e]=b,o.data.value=b,o.error.value=void 0,o.status.value="success"}).catch(y=>{if(a._asyncDataPromises[e]&&a._asyncDataPromises[e]!==p||o._abortController?.signal.aborted)return a._asyncDataPromises[e];if(typeof DOMException<"u"&&y instanceof DOMException&&y.name==="AbortError")return o.status.value="idle",a._asyncDataPromises[e];o.error.value=k(y),o.data.value=I(i.default()),o.status.value="error"}).finally(()=>{D.abort(),delete a._asyncDataPromises[e]});return a._asyncDataPromises[e]=p,a._asyncDataPromises[e]},_execute:ra((..._)=>o.execute(..._),0,{leading:!0}),_default:i.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{v(),a._asyncData[e]?._init&&(a._asyncData[e]._init=!1),f||K(()=>{a._asyncData[e]?._init||(L(a,e),o.execute=()=>Promise.resolve())})}};return o}const ua=()=>{},U=(a,e,s)=>{if(e.isHydrating)return e.payload.data[a];if(s.cause!=="refresh:manual"&&s.cause!=="refresh:hook")return e.static.data[a]};function da(a,e,s){const i=a.filter(n=>!!n);if(typeof s=="number"&&s>=0){const n=AbortSignal.timeout?.(s);n&&i.push(n)}if(AbortSignal.any)return AbortSignal.any(i);const r=new AbortController;for(const n of i)if(n.aborted){const t=n.reason??new DOMException("Aborted","AbortError");try{r.abort(t)}catch{r.abort()}return r.signal}const f=()=>{const t=i.find(c=>c.aborted)?.reason??new DOMException("Aborted","AbortError");try{r.abort(t)}catch{r.abort()}};for(const n of i)n.addEventListener?.("abort",f,{once:!0,signal:e});return r.signal}export{va as a,_a as c,ya as r,Da as u};

import{d as $,ak as j,w as B,K as M,r as b,y as S,c as r,i as F,a as o,b as i,e as l,h as N,T as U,O as q,o as u,_ as R,L as A,Q as d,F as H,m as K,t as O,S as P,R as h,V as w}from"./Dv0CfUCG.js";import{i as f,_ as Q}from"./YluVS3Ua.js";import{_ as z}from"./Bb-YVLY2.js";import{_ as G,a as I}from"./BjdC9nEl.js";import{f as J}from"./dOo_R78I.js";import{m as W}from"./h4L-lgrT.js";import{u as X}from"./DCfKSLFt.js";import"./BnM1HfN_.js";import"./CCD7l6_O.js";const Y={key:0,class:"relative flex flex-col w-full max-w-3xl p-3 mx-auto overflow-hidden"},Z={class:"py-8"},ee=["value"],te={class:"flex flex-col gap-8 pb-4"},ce=$({__name:"journal",async setup(oe){let p,g;const m=j(),{data:c,pending:V}=([p,g]=B(()=>X(`/api/user/journal/${m.params.id}`,"$0N9kfdtjww")),p=await p,g(),p),y=M(),s=b(!1);let v=b("");const t=S({mood:"",title:"",entry:""});c.value&&(t.mood=c.value.mood,t.title=c.value.title,t.entry=c.value.entry);async function L(){s.value=!0,$fetch(`/api/user/journal/${m.params.id}`,{method:"PUT",body:{...t,date:J()}}).then(async()=>{await w("/dashboard/spirit")}).catch(async e=>{y.error("Failed to update","Try again"),console.log(e),v.value=e.statusMessage,s.value=!1})}async function T(){s.value=!0,$fetch(`/api/user/journal/${m.params.id}`,{method:"DELETE",body:t}).then(async()=>{await w("/dashboard/spirit")}).catch(async e=>{y.error("Failed to delete","Try again"),console.log(e),v.value=e.statusMessage,s.value=!1})}return(e,n)=>{const C=R,x=Q,k=z,D=G,E=I,_=q("motion");return o(V)?F("",!0):(u(),r("div",Y,[i("div",Z,[l(C,{text:"Edit journal entry"})]),l(U,{name:"slide-up",mode:"out-in"},{default:N(()=>[i("form",{onSubmit:A(L,["prevent"]),class:"space-y-6"},[d((u(),r("div",null,[d(i("select",{id:"status-select","onUpdate:modelValue":n[0]||(n[0]=a=>o(t).mood=a),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[n[3]||(n[3]=i("option",{value:"",disabled:"",selected:"",hidden:""},"Choose mood",-1)),(u(!0),r(H,null,K(o(W),a=>(u(),r("option",{value:a.value,key:a.label},O(a.label),9,ee))),128))],512),[[P,o(t).mood]])])),[[_,{...("inputVarient"in e?e.inputVarient:o(f))()}]]),d((u(),r("div",null,[l(x,{text:"Title"}),d(i("input",{id:"text",type:"text","onUpdate:modelValue":n[1]||(n[1]=a=>o(t).title=a),placeholder:"Title",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[h,o(t).title]])])),[[_,{...("inputVarient"in e?e.inputVarient:o(f))()}]]),d((u(),r("div",null,[l(x,{text:"Entry"}),d(i("textarea",{id:"text",type:"text","onUpdate:modelValue":n[2]||(n[2]=a=>o(t).entry=a),placeholder:"Entry",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[h,o(t).entry]])])),[[_,{...("inputVarient"in e?e.inputVarient:o(f))()}]]),i("div",te,[l(k,{text:"Save",isLoading:s.value},null,8,["isLoading"]),l(D,{text:"Cancel",path:"/dashboard/spirit",isLoading:s.value},null,8,["isLoading"]),l(E,{onClick:T,text:"Delete",isLoading:s.value},null,8,["isLoading"])])],32)]),_:1})]))}}});export{ce as default};

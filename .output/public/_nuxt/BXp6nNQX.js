import{d as U,al as q,I as F,ak as E,K,h as y,i as j,a as i,z,C as e,b as l,y as r,A as H,T as I,am as O,O as R,o as u,L as W,Q as d,F as w,r as V,t as f,S as L,R as k,W as T}from"./-oKnPsBe.js";import{_ as G,i as _}from"./BiZrFXYI.js";import{_ as P}from"./-_9ZdCk8.js";import{_ as Q,a as Y}from"./B-eKm1VW.js";import{s as J,a as X}from"./h4L-lgrT.js";import{u as Z}from"./CiVCpm_D.js";import{r as C}from"./h1wk0MG4.js";const ee={key:0,class:"relative flex flex-col w-full max-w-3xl p-3 mx-auto overflow-hidden"},te={class:"flex justify-center py-4"},oe=["value"],ae=["value"],ne=["value"],se={class:"flex flex-col gap-8 pb-4"},_e=U({__name:"books",async setup(ie){let g,v;const m=q();F({title:`Ascend | Book | ${m.params.id}`,meta:[{name:"description",content:"Ascend Book Dashboard."}]});const{data:n,pending:B}=([g,v]=E(()=>Z(`/api/user/books/${m.params.id}`,"$zf7YHpGOWq")),g=await g,v(),g),x=K(),p=y(!1);let h=y("");const t=j({book_author:"",book_image:"",book_start_date:"",status:"",book_title:"",booklist:!1,kind_of_book:"",notes:""});n.value&&(t.book_author=n.value.book_author,t.book_start_date=n.value.book_start_date,t.book_image=n.value.book_image,t.book_title=n.value.book_title,t.booklist=n.value.booklist==="true",t.kind_of_book=n.value.kind_of_book,t.notes=n.value.notes,t.status=n.value.status);async function D(){p.value=!0,$fetch(`/api/user/books/${m.params.id}/books`,{method:"PUT",body:t}).then(async()=>{await C(["books","chart_book"]),await T("/dashboard/mind")}).catch(async a=>{x.error("Failed to update","Try again"),console.log(a),h.value=a.statusMessage,p.value=!1})}async function $(){p.value=!0,$fetch(`/api/user/books/${m.params.id}`,{method:"DELETE",body:t}).then(async()=>{await C(["books","chart_book"]),await T("/dashboard/mind")}).catch(async a=>{x.error("Failed to delete","Try again"),console.log(a),h.value=a.statusMessage,p.value=!1})}return(a,s)=>{const S=O,b=G,A=P,M=Q,N=Y,c=R("motion");return e(B)?z("",!0):(u(),i("div",ee,[l("div",te,[r(S,{class:"object-cover h-60",src:e(n)?.book_image,format:"webp",preload:"",loading:"eager","fetch-priority":"high"},null,8,["src"])]),r(I,{name:"slide-up",mode:"out-in"},{default:H(()=>[l("form",{onSubmit:W(D,["prevent"]),class:"space-y-6"},[d((u(),i("div",null,[r(b,{text:"Kind of book"}),d(l("select",{id:"status-select","onUpdate:modelValue":s[0]||(s[0]=o=>e(t).kind_of_book=o),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[s[5]||(s[5]=l("option",{disabled:"",value:""},"Kind of book",-1)),(u(!0),i(w,null,V(e(J),o=>(u(),i("option",{value:o.value,key:o.label},f(o.label),9,oe))),128))],512),[[L,e(t).kind_of_book]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),d((u(),i("div",null,[r(b,{text:"Status"}),d(l("select",{id:"status-select","onUpdate:modelValue":s[1]||(s[1]=o=>e(t).status=o),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[l("option",{value:e(n).status,disabled:"",hidden:""},f(e(n).status?"Completed":"Currently reading"),9,ae),(u(!0),i(w,null,V(e(X),o=>(u(),i("option",{value:o.value,key:o.label},f(o.label),9,ne))),128))],512),[[L,e(t).status]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),d((u(),i("div",null,[r(b,{text:"Title"}),d(l("input",{id:"text",type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>e(t).book_title=o),placeholder:"Title",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[k,e(t).book_title]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),d((u(),i("div",null,[r(b,{text:"Author"}),d(l("input",{id:"text",type:"text","onUpdate:modelValue":s[3]||(s[3]=o=>e(t).book_author=o),placeholder:"Author",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[k,e(t).book_author]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),d((u(),i("div",null,[r(b,{text:"Notes"}),d(l("textarea",{id:"text",type:"text","onUpdate:modelValue":s[4]||(s[4]=o=>e(t).notes=o),placeholder:"Book notes",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[k,e(t).notes]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),l("div",se,[r(A,{text:"Save",isLoading:p.value},null,8,["isLoading"]),r(M,{text:"Cancel",path:"/dashboard/mind",isLoading:p.value},null,8,["isLoading"]),r(N,{onClick:$,text:"Delete",isLoading:p.value},null,8,["isLoading"])])],32)]),_:1})]))}}});export{_e as default};

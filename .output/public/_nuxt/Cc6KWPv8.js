import{_ as $}from"./CUlLGUuT.js";import{_ as j}from"./mSYztmAn.js";import{_ as k}from"./BJJSekOF.js";import{_ as B,a as M}from"./C-X9a1L8.js";import{i as _}from"./THmtR4Dj.js";import{e as N,am as U,J as q,f as F,q as b,s as P,c as r,i as A,g as o,a as i,b as l,w as H,T as J,O as K,o as u,K as O,N as d,F as Q,r as R,t as z,Q as G,P as h,a3 as w}from"./BBuQfMQW.js";import{f as I}from"./BGMpC11e.js";import{m as W}from"./DLgMY6mf.js";import{u as X}from"./c_q9ivfL.js";import"./kaJMkjNa.js";const Y={key:0,class:"relative flex flex-col w-full max-w-3xl p-3 mx-auto overflow-hidden"},Z={class:"py-8"},ee=["value"],te={class:"flex flex-col gap-8 pb-4"},me=N({__name:"journal",async setup(oe){let p,g;const m=U(),{data:c,pending:V}=([p,g]=q(()=>X(`/api/user/journal/${m.params.id}`,"$0N9kfdtjww")),p=await p,g(),p),{fetch:v}=F(),a=b(!1);let x=b("");const t=P({mood:"",title:"",entry:""});c.value&&(t.mood=c.value.mood,t.title=c.value.title,t.entry=c.value.entry);async function L(){a.value=!0,$fetch(`/api/user/journal/${m.params.id}`,{method:"PUT",body:{...t,date:I()}}).then(async()=>{await v(),await w("/dashboard/spirit"),a.value=!1}).catch(async e=>{console.log(e),x.value=e.statusMessage,a.value=!1})}async function C(){a.value=!0,$fetch(`/api/user/journal/${m.params.id}`,{method:"DELETE",body:t}).then(async()=>{await v(),a.value=!1,await w("/dashboard/spirit")}).catch(async e=>{console.log(e),x.value=e.statusMessage,a.value=!1})}return(e,s)=>{const T=$,y=j,D=k,E=B,S=M,f=K("motion");return o(V)?A("",!0):(u(),r("div",Y,[i("div",Z,[l(T,{text:"Edit journal entry"})]),l(J,{name:"slide-up",mode:"out-in"},{default:H(()=>[i("form",{onSubmit:O(L,["prevent"]),class:"space-y-6"},[d((u(),r("div",null,[d(i("select",{id:"status-select","onUpdate:modelValue":s[0]||(s[0]=n=>o(t).mood=n),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[s[3]||(s[3]=i("option",{value:"",disabled:"",selected:"",hidden:""},"Choose mood",-1)),(u(!0),r(Q,null,R(o(W),n=>(u(),r("option",{value:n.value,key:n.label},z(n.label),9,ee))),128))],512),[[G,o(t).mood]])])),[[f,{...("inputVarient"in e?e.inputVarient:o(_))()}]]),d((u(),r("div",null,[l(y,{text:"Title"}),d(i("input",{id:"text",type:"text","onUpdate:modelValue":s[1]||(s[1]=n=>o(t).title=n),placeholder:"Title",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[h,o(t).title]])])),[[f,{...("inputVarient"in e?e.inputVarient:o(_))()}]]),d((u(),r("div",null,[l(y,{text:"Entry"}),d(i("textarea",{id:"text",type:"text","onUpdate:modelValue":s[2]||(s[2]=n=>o(t).entry=n),placeholder:"Entry",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[h,o(t).entry]])])),[[f,{...("inputVarient"in e?e.inputVarient:o(_))()}]]),i("div",te,[l(D,{text:"Save",isLoading:a.value},null,8,["isLoading"]),l(E,{text:"Cancel",path:"/dashboard/spirit",isLoading:a.value},null,8,["isLoading"]),l(S,{onClick:C,text:"Delete",isLoading:a.value},null,8,["isLoading"])])],32)]),_:1})]))}}});export{me as default};

import{_ as j}from"./HU4Mgv1h.js";import{i as _,_ as k}from"./P5oq7zqO.js";import{_ as B}from"./DsnQ0KF8.js";import{_ as F,a as N}from"./CMjz7fwZ.js";import{e as U,am as q,an as P,f as A,J as H,q as h,s as J,c as r,i as K,g as a,a as i,b as l,w as O,T as Q,M as R,o as u,K as z,O as d,F as G,r as I,t as W,Q as X,P as w,a3 as V}from"./C6hJL-sY.js";import{f as Y}from"./BGMpC11e.js";import{m as Z}from"./DLgMY6mf.js";import{u as ee}from"./XPEaYAeC.js";import{r as T}from"./BWc4nruB.js";const te={key:0,class:"relative flex flex-col w-full max-w-3xl p-3 mx-auto overflow-hidden"},ae={class:"py-8"},oe=["value"],ne={class:"flex flex-col gap-8 pb-4"},_e=U({__name:"journal",async setup(se){let p,g;const m=q(),{data:c,pending:L}=([p,g]=P(()=>ee(`/api/user/journal/${m.params.id}`,"$0N9kfdtjww")),p=await p,g(),p),{fetch:v}=A(),y=H(),o=h(!1);let x=h("");const t=J({mood:"",title:"",entry:""});c.value&&(t.mood=c.value.mood,t.title=c.value.title,t.entry=c.value.entry);async function C(){o.value=!0,$fetch(`/api/user/journal/${m.params.id}`,{method:"PUT",body:{...t,date:Y()}}).then(async()=>{await v(),await T(),await V("/dashboard/spirit"),o.value=!1}).catch(async e=>{y.error("Failed to update","Try again"),console.log(e),x.value=e.statusMessage,o.value=!1})}async function D(){o.value=!0,$fetch(`/api/user/journal/${m.params.id}`,{method:"DELETE",body:t}).then(async()=>{await v(),await T(),await V("/dashboard/spirit"),o.value=!1}).catch(async e=>{y.error("Failed to delete","Try again"),console.log(e),x.value=e.statusMessage,o.value=!1})}return(e,s)=>{const E=j,b=k,M=B,S=F,$=N,f=R("motion");return a(L)?K("",!0):(u(),r("div",te,[i("div",ae,[l(E,{text:"Edit journal entry"})]),l(Q,{name:"slide-up",mode:"out-in"},{default:O(()=>[i("form",{onSubmit:z(C,["prevent"]),class:"space-y-6"},[d((u(),r("div",null,[d(i("select",{id:"status-select","onUpdate:modelValue":s[0]||(s[0]=n=>a(t).mood=n),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[s[3]||(s[3]=i("option",{value:"",disabled:"",selected:"",hidden:""},"Choose mood",-1)),(u(!0),r(G,null,I(a(Z),n=>(u(),r("option",{value:n.value,key:n.label},W(n.label),9,oe))),128))],512),[[X,a(t).mood]])])),[[f,{...("inputVarient"in e?e.inputVarient:a(_))()}]]),d((u(),r("div",null,[l(b,{text:"Title"}),d(i("input",{id:"text",type:"text","onUpdate:modelValue":s[1]||(s[1]=n=>a(t).title=n),placeholder:"Title",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[w,a(t).title]])])),[[f,{...("inputVarient"in e?e.inputVarient:a(_))()}]]),d((u(),r("div",null,[l(b,{text:"Entry"}),d(i("textarea",{id:"text",type:"text","onUpdate:modelValue":s[2]||(s[2]=n=>a(t).entry=n),placeholder:"Entry",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[w,a(t).entry]])])),[[f,{...("inputVarient"in e?e.inputVarient:a(_))()}]]),i("div",ne,[l(M,{text:"Save",isLoading:o.value},null,8,["isLoading"]),l(S,{text:"Cancel",path:"/dashboard/spirit",isLoading:o.value},null,8,["isLoading"]),l($,{onClick:D,text:"Delete",isLoading:o.value},null,8,["isLoading"])])],32)]),_:1})]))}}});export{_e as default};

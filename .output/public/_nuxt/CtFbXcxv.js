import{d as S,ak as $,aj as B,u as M,J as N,r as b,x as U,c as r,h as F,a,b as i,e as l,w as q,T as P,N as R,o as u,_ as A,K as H,P as d,F as J,l as K,t as Q,R as z,Q as h,U as w}from"./B4PnUueJ.js";import{i as _,_ as G}from"./BNxnb9y5.js";import{_ as I}from"./CRSpKDgV.js";import{_ as O,a as W}from"./VrbTcm3J.js";import{f as X}from"./BGMpC11e.js";import{m as Y}from"./DLgMY6mf.js";import{u as Z}from"./CbdII-90.js";import{r as ee}from"./DRSVqhlX.js";const te={key:0,class:"relative flex flex-col w-full max-w-3xl p-3 mx-auto overflow-hidden"},ae={class:"py-8"},oe=["value"],ne={class:"flex flex-col gap-8 pb-4"},fe=S({__name:"journal",async setup(se){let p,g;const m=$(),{data:c,pending:V}=([p,g]=B(()=>Z(`/api/user/journal/${m.params.id}`,"$0N9kfdtjww")),p=await p,g(),p),{fetch:T}=M(),v=N(),n=b(!1);let x=b("");const t=U({mood:"",title:"",entry:""});c.value&&(t.mood=c.value.mood,t.title=c.value.title,t.entry=c.value.entry);async function L(){n.value=!0,$fetch(`/api/user/journal/${m.params.id}`,{method:"PUT",body:{...t,date:X()}}).then(async()=>{await T(),await ee(),await w("/dashboard/spirit"),n.value=!1}).catch(async e=>{v.error("Failed to update","Try again"),console.log(e),x.value=e.statusMessage,n.value=!1})}async function C(){n.value=!0,$fetch(`/api/user/journal/${m.params.id}`,{method:"DELETE",body:t}).then(async()=>{await w("/dashboard/spirit")}).catch(async e=>{v.error("Failed to delete","Try again"),console.log(e),x.value=e.statusMessage,n.value=!1})}return(e,s)=>{const D=A,y=G,j=I,k=O,E=W,f=R("motion");return a(V)?F("",!0):(u(),r("div",te,[i("div",ae,[l(D,{text:"Edit journal entry"})]),l(P,{name:"slide-up",mode:"out-in"},{default:q(()=>[i("form",{onSubmit:H(L,["prevent"]),class:"space-y-6"},[d((u(),r("div",null,[d(i("select",{id:"status-select","onUpdate:modelValue":s[0]||(s[0]=o=>a(t).mood=o),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[s[3]||(s[3]=i("option",{value:"",disabled:"",selected:"",hidden:""},"Choose mood",-1)),(u(!0),r(J,null,K(a(Y),o=>(u(),r("option",{value:o.value,key:o.label},Q(o.label),9,oe))),128))],512),[[z,a(t).mood]])])),[[f,{...("inputVarient"in e?e.inputVarient:a(_))()}]]),d((u(),r("div",null,[l(y,{text:"Title"}),d(i("input",{id:"text",type:"text","onUpdate:modelValue":s[1]||(s[1]=o=>a(t).title=o),placeholder:"Title",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[h,a(t).title]])])),[[f,{...("inputVarient"in e?e.inputVarient:a(_))()}]]),d((u(),r("div",null,[l(y,{text:"Entry"}),d(i("textarea",{id:"text",type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>a(t).entry=o),placeholder:"Entry",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[h,a(t).entry]])])),[[f,{...("inputVarient"in e?e.inputVarient:a(_))()}]]),i("div",ne,[l(j,{text:"Save",isLoading:n.value},null,8,["isLoading"]),l(k,{text:"Cancel",path:"/dashboard/spirit",isLoading:n.value},null,8,["isLoading"]),l(E,{onClick:C,text:"Delete",isLoading:n.value},null,8,["isLoading"])])],32)]),_:1})]))}}});export{fe as default};

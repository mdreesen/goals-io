import{d as q,ak as F,aj as A,J as E,h as y,i as j,a as i,z as K,C as e,b as l,y as r,A as z,T as P,al as R,N as G,o as u,K as H,P as d,F as w,r as V,t as m,R as T,Q as k,V as C}from"./Dwi1IfWL.js";import{_ as I,i as _}from"./DnYNXIQJ.js";import{_ as J}from"./Cb7j04qf.js";import{_ as O,a as Q}from"./BgtOfEF6.js";import{s as W,a as Y}from"./h4L-lgrT.js";import{u as X}from"./BzuAwjzU.js";import{r as L}from"./DtlITRkK.js";const Z={key:0,class:"relative flex flex-col w-full max-w-3xl p-3 mx-auto overflow-hidden"},ee={class:"flex justify-center py-4"},te=["value"],oe=["value"],ae=["value"],ne={class:"flex flex-col gap-8 pb-4"},ce=q({__name:"books",async setup(se){let g,v;const f=F(),{data:n,pending:B}=([g,v]=A(()=>X(`/api/user/books/${f.params.id}`,"$zf7YHpGOWq")),g=await g,v(),g),x=E(),p=y(!1);let h=y("");const t=j({book_author:"",book_image:"",book_start_date:"",status:"",book_title:"",booklist:!1,kind_of_book:"",notes:""});n.value&&(t.book_author=n.value.book_author,t.book_start_date=n.value.book_start_date,t.book_image=n.value.book_image,t.book_title=n.value.book_title,t.booklist=n.value.booklist==="true",t.kind_of_book=n.value.kind_of_book,t.notes=n.value.notes,t.status=n.value.status);async function D(){p.value=!0,$fetch(`/api/user/books/${f.params.id}/books`,{method:"PUT",body:t}).then(async()=>{await L(["books","chart_book"]),await C("/dashboard/mind")}).catch(async a=>{x.error("Failed to update","Try again"),console.log(a),h.value=a.statusMessage,p.value=!1})}async function N(){p.value=!0,$fetch(`/api/user/books/${f.params.id}`,{method:"DELETE",body:t}).then(async()=>{await L(["books","chart_book"]),await C("/dashboard/mind")}).catch(async a=>{x.error("Failed to delete","Try again"),console.log(a),h.value=a.statusMessage,p.value=!1})}return(a,s)=>{const $=R,b=I,M=J,S=O,U=Q,c=G("motion");return e(B)?K("",!0):(u(),i("div",Z,[l("div",ee,[r($,{class:"object-cover h-60",src:e(n)?.book_image,format:"webp",preload:"",loading:"eager","fetch-priority":"high"},null,8,["src"])]),r(P,{name:"slide-up",mode:"out-in"},{default:z(()=>[l("form",{onSubmit:H(D,["prevent"]),class:"space-y-6"},[d((u(),i("div",null,[r(b,{text:"Kind of book"}),d(l("select",{id:"status-select","onUpdate:modelValue":s[0]||(s[0]=o=>e(t).kind_of_book=o),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[s[5]||(s[5]=l("option",{disabled:"",value:""},"Kind of book",-1)),(u(!0),i(w,null,V(e(W),o=>(u(),i("option",{value:o.value,key:o.label},m(o.label),9,te))),128))],512),[[T,e(t).kind_of_book]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),d((u(),i("div",null,[r(b,{text:"Status"}),d(l("select",{id:"status-select","onUpdate:modelValue":s[1]||(s[1]=o=>e(t).status=o),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[l("option",{value:e(n).status,disabled:"",hidden:""},m(e(n).status?"Completed":"Currently reading"),9,oe),(u(!0),i(w,null,V(e(Y),o=>(u(),i("option",{value:o.value,key:o.label},m(o.label),9,ae))),128))],512),[[T,e(t).status]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),d((u(),i("div",null,[r(b,{text:"Title"}),d(l("input",{id:"text",type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>e(t).book_title=o),placeholder:"Title",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[k,e(t).book_title]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),d((u(),i("div",null,[r(b,{text:"Author"}),d(l("input",{id:"text",type:"text","onUpdate:modelValue":s[3]||(s[3]=o=>e(t).book_author=o),placeholder:"Author",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[k,e(t).book_author]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),d((u(),i("div",null,[r(b,{text:"Notes"}),d(l("textarea",{id:"text",type:"text","onUpdate:modelValue":s[4]||(s[4]=o=>e(t).notes=o),placeholder:"Book notes",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[k,e(t).notes]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),l("div",ne,[r(M,{text:"Save",isLoading:p.value},null,8,["isLoading"]),r(S,{text:"Cancel",path:"/dashboard/mind",isLoading:p.value},null,8,["isLoading"]),r(U,{onClick:N,text:"Delete",isLoading:p.value},null,8,["isLoading"])])],32)]),_:1})]))}}});export{ce as default};

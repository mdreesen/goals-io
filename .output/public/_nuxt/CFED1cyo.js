import{d as k,al as B,I as M,ak as S,K as F,h as b,i as N,a as r,z as A,C as a,b as i,y as l,A as U,T as q,O as J,o as u,J as H,L as R,Q as d,F as z,r as I,t as K,S as O,R as h,W as w}from"./-oKnPsBe.js";import{i as _,_ as P}from"./BiZrFXYI.js";import{_ as Q}from"./-_9ZdCk8.js";import{_ as W,a as G}from"./B-eKm1VW.js";import{f as X}from"./dOo_R78I.js";import{m as Y}from"./h4L-lgrT.js";import{u as Z}from"./CiVCpm_D.js";import{r as V}from"./h1wk0MG4.js";const ee={key:0,class:"relative flex flex-col w-full max-w-3xl p-3 mx-auto overflow-hidden"},te={class:"py-8"},ae=["value"],oe={class:"flex flex-col gap-8 pb-4"},me=k({__name:"journal",async setup(ne){let p,g;const c=B();M({title:`Ascend | Journal Entry | ${c.params.id}`,meta:[{name:"description",content:"Ascend Journal Entry Dashboard."}]});const{data:m,pending:L}=([p,g]=S(()=>Z(`/api/user/journal/${c.params.id}`,"$0N9kfdtjww")),p=await p,g(),p),y=F(),s=b(!1);let v=b("");const t=N({mood:"",title:"",entry:""});m.value&&(t.mood=m.value.mood,t.title=m.value.title,t.entry=m.value.entry);async function T(){s.value=!0,$fetch(`/api/user/journal/${c.params.id}`,{method:"PUT",body:{...t,date:X()}}).then(async()=>{await V("journal"),await w("/dashboard/spirit")}).catch(async e=>{y.error("Failed to update","Try again"),console.log(e),v.value=e.statusMessage,s.value=!1})}async function C(){s.value=!0,$fetch(`/api/user/journal/${c.params.id}`,{method:"DELETE",body:t}).then(async()=>{await V("journal"),await w("/dashboard/spirit")}).catch(async e=>{y.error("Failed to delete","Try again"),console.log(e),v.value=e.statusMessage,s.value=!1})}return(e,n)=>{const D=H,x=P,E=Q,j=W,$=G,f=J("motion");return a(L)?A("",!0):(u(),r("div",ee,[i("div",te,[l(D,{text:"Edit journal entry"})]),l(q,{name:"slide-up",mode:"out-in"},{default:U(()=>[i("form",{onSubmit:R(T,["prevent"]),class:"space-y-6"},[d((u(),r("div",null,[d(i("select",{id:"status-select","onUpdate:modelValue":n[0]||(n[0]=o=>a(t).mood=o),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[n[3]||(n[3]=i("option",{value:"",disabled:"",selected:"",hidden:""},"Choose mood",-1)),(u(!0),r(z,null,I(a(Y),o=>(u(),r("option",{value:o.value,key:o.label},K(o.label),9,ae))),128))],512),[[O,a(t).mood]])])),[[f,{...("inputVarient"in e?e.inputVarient:a(_))()}]]),d((u(),r("div",null,[l(x,{text:"Title"}),d(i("input",{id:"text",type:"text","onUpdate:modelValue":n[1]||(n[1]=o=>a(t).title=o),placeholder:"Title",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[h,a(t).title]])])),[[f,{...("inputVarient"in e?e.inputVarient:a(_))()}]]),d((u(),r("div",null,[l(x,{text:"Entry"}),d(i("textarea",{id:"text",type:"text","onUpdate:modelValue":n[2]||(n[2]=o=>a(t).entry=o),placeholder:"Entry",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[h,a(t).entry]])])),[[f,{...("inputVarient"in e?e.inputVarient:a(_))()}]]),i("div",oe,[l(E,{text:"Save",isLoading:s.value},null,8,["isLoading"]),l(j,{text:"Cancel",path:"/dashboard/spirit",isLoading:s.value},null,8,["isLoading"]),l($,{onClick:C,text:"Delete",isLoading:s.value},null,8,["isLoading"])])],32)]),_:1})]))}}});export{me as default};

System.register(["./DzOvJm9Y-legacy.js","./kRtxRAVC-legacy.js","./CD3Wo88K-legacy.js","./BdE9oIee-legacy.js","./BcA2x2qS-legacy.js","./CY34_Xl6-legacy.js","./DscWBl3V-legacy.js","./DWFv6n_G-legacy.js"],function(e,t){"use strict";var a,l,n,i,o,r,u,s,d,c,g,y,p,x,f,v,h,m,b,w,j,V,L,T,_,E,$,k,q,C,S,U,F,M;return{setters:[e=>{a=e.d,l=e.aj,n=e.ak,i=e.u,o=e.J,r=e.r,u=e.x,s=e.c,d=e.h,c=e.a,g=e.b,y=e.e,p=e.w,x=e.T,f=e.N,v=e.o,h=e._,m=e.K,b=e.Q,w=e.F,j=e.l,V=e.t,L=e.S,T=e.R,_=e.V},e=>{E=e.i,$=e._},e=>{k=e._},e=>{q=e._,C=e.a},e=>{S=e.f},e=>{U=e.m},e=>{F=e.u},e=>{M=e.r}],execute:function(){const t={key:0,class:"relative flex flex-col w-full max-w-3xl p-3 mx-auto overflow-hidden"},D={class:"py-8"},K=["value"],N={class:"flex flex-col gap-8 pb-4"};e("default",a({__name:"journal",async setup(e){let a,A;const J=l(),{data:P,pending:Q}=([a,A]=n(()=>F(`/api/user/journal/${J.params.id}`,"$0N9kfdtjww")),a=await a,A(),a),{fetch:R}=i(),z=o(),B=r(!1);let G=r("");const H=u({mood:"",title:"",entry:""});async function I(){B.value=!0,$fetch(`/api/user/journal/${J.params.id}`,{method:"PUT",body:{...H,date:S()}}).then(async()=>{await R(),await M(),await _("/dashboard/spirit"),B.value=!1}).catch(async e=>{z.error("Failed to update","Try again"),console.log(e),G.value=e.statusMessage,B.value=!1})}async function O(){B.value=!0,$fetch(`/api/user/journal/${J.params.id}`,{method:"DELETE",body:H}).then(async()=>{await _("/dashboard/spirit")}).catch(async e=>{z.error("Failed to delete","Try again"),console.log(e),G.value=e.statusMessage,B.value=!1})}return P.value&&(H.mood=P.value.mood,H.title=P.value.title,H.entry=P.value.entry),(e,a)=>{const l=h,n=$,i=k,o=q,r=C,u=f("motion");return c(Q)?d("",!0):(v(),s("div",t,[g("div",D,[y(l,{text:"Edit journal entry"})]),y(x,{name:"slide-up",mode:"out-in"},{default:p(()=>[g("form",{onSubmit:m(I,["prevent"]),class:"space-y-6"},[b((v(),s("div",null,[b(g("select",{id:"status-select","onUpdate:modelValue":a[0]||(a[0]=e=>c(H).mood=e),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[a[3]||(a[3]=g("option",{value:"",disabled:"",selected:"",hidden:""},"Choose mood",-1)),(v(!0),s(w,null,j(c(U),e=>(v(),s("option",{value:e.value,key:e.label},V(e.label),9,K))),128))],512),[[L,c(H).mood]])])),[[u,{...("inputVarient"in e?e.inputVarient:c(E))()}]]),b((v(),s("div",null,[y(n,{text:"Title"}),b(g("input",{id:"text",type:"text","onUpdate:modelValue":a[1]||(a[1]=e=>c(H).title=e),placeholder:"Title",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[T,c(H).title]])])),[[u,{...("inputVarient"in e?e.inputVarient:c(E))()}]]),b((v(),s("div",null,[y(n,{text:"Entry"}),b(g("textarea",{id:"text",type:"text","onUpdate:modelValue":a[2]||(a[2]=e=>c(H).entry=e),placeholder:"Entry",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[T,c(H).entry]])])),[[u,{...("inputVarient"in e?e.inputVarient:c(E))()}]]),g("div",N,[y(i,{text:"Save",isLoading:B.value},null,8,["isLoading"]),y(o,{text:"Cancel",path:"/dashboard/spirit",isLoading:B.value},null,8,["isLoading"]),y(r,{onClick:O,text:"Delete",isLoading:B.value},null,8,["isLoading"])])],32)]),_:1})]))}}}))}}});

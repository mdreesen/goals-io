import{d as q,ak as F,w as N,K as E,r as h,y as A,c as i,i as K,a as e,b as l,e as u,h as j,T as O,al as R,O as z,o as r,L as G,Q as d,F as w,m as V,t as f,S as L,R as v,V as T}from"./Dv0CfUCG.js";import{_ as H,i as _}from"./YluVS3Ua.js";import{_ as I}from"./Bb-YVLY2.js";import{_ as P,a as Q}from"./BjdC9nEl.js";import{s as W,a as Y}from"./h4L-lgrT.js";import{u as J}from"./DCfKSLFt.js";import"./BnM1HfN_.js";import"./CCD7l6_O.js";const X={key:0,class:"relative flex flex-col w-full max-w-3xl p-3 mx-auto overflow-hidden"},Z={class:"flex justify-center py-4"},ee=["value"],te=["value"],oe=["value"],ae={class:"flex flex-col gap-8 pb-4"},ce=q({__name:"books",async setup(ne){let g,k;const m=F(),{data:n,pending:C}=([g,k]=N(()=>J(`/api/user/books/${m.params.id}`,"$zf7YHpGOWq")),g=await g,k(),g),x=E(),p=h(!1);let y=h("");const t=A({book_author:"",book_image:"",book_start_date:"",status:"",book_title:"",booklist:!1,kind_of_book:"",notes:""});n.value&&(t.book_author=n.value.book_author,t.book_start_date=n.value.book_start_date,t.book_image=n.value.book_image,t.book_title=n.value.book_title,t.booklist=n.value.booklist==="true",t.kind_of_book=n.value.kind_of_book,t.notes=n.value.notes,t.status=n.value.status);async function B(){p.value=!0,$fetch(`/api/user/books/${m.params.id}/books`,{method:"PUT",body:t}).then(async()=>{await T("/dashboard/mind")}).catch(async a=>{x.error("Failed to update","Try again"),console.log(a),y.value=a.statusMessage,p.value=!1})}async function S(){p.value=!0,$fetch(`/api/user/books/${m.params.id}`,{method:"DELETE",body:t}).then(async()=>{await T("/dashboard/mind")}).catch(async a=>{x.error("Failed to delete","Try again"),console.log(a),y.value=a.statusMessage,p.value=!1})}return(a,s)=>{const $=R,b=H,D=I,M=P,U=Q,c=z("motion");return e(C)?K("",!0):(r(),i("div",X,[l("div",Z,[u($,{class:"object-cover h-60",src:e(n)?.book_image,format:"webp",preload:"",loading:"eager","fetch-priority":"high"},null,8,["src"])]),u(O,{name:"slide-up",mode:"out-in"},{default:j(()=>[l("form",{onSubmit:G(B,["prevent"]),class:"space-y-6"},[d((r(),i("div",null,[u(b,{text:"Kind of book"}),d(l("select",{id:"status-select","onUpdate:modelValue":s[0]||(s[0]=o=>e(t).kind_of_book=o),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[s[5]||(s[5]=l("option",{disabled:"",value:""},"Kind of book",-1)),(r(!0),i(w,null,V(e(W),o=>(r(),i("option",{value:o.value,key:o.label},f(o.label),9,ee))),128))],512),[[L,e(t).kind_of_book]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),d((r(),i("div",null,[u(b,{text:"Status"}),d(l("select",{id:"status-select","onUpdate:modelValue":s[1]||(s[1]=o=>e(t).status=o),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[l("option",{value:e(n).status,disabled:"",hidden:""},f(e(n).status?"Completed":"Currently reading"),9,te),(r(!0),i(w,null,V(e(Y),o=>(r(),i("option",{value:o.value,key:o.label},f(o.label),9,oe))),128))],512),[[L,e(t).status]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),d((r(),i("div",null,[u(b,{text:"Title"}),d(l("input",{id:"text",type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>e(t).book_title=o),placeholder:"Title",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,e(t).book_title]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),d((r(),i("div",null,[u(b,{text:"Author"}),d(l("input",{id:"text",type:"text","onUpdate:modelValue":s[3]||(s[3]=o=>e(t).book_author=o),placeholder:"Author",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,e(t).book_author]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),d((r(),i("div",null,[u(b,{text:"Notes"}),d(l("textarea",{id:"text",type:"text","onUpdate:modelValue":s[4]||(s[4]=o=>e(t).notes=o),placeholder:"Book notes",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,e(t).notes]])])),[[c,{...("inputVarient"in a?a.inputVarient:e(_))()}]]),l("div",ae,[u(D,{text:"Save",isLoading:p.value},null,8,["isLoading"]),u(M,{text:"Cancel",path:"/dashboard/mind",isLoading:p.value},null,8,["isLoading"]),u(U,{onClick:S,text:"Delete",isLoading:p.value},null,8,["isLoading"])])],32)]),_:1})]))}}});export{ce as default};

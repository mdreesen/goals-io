System.register(["./DzOvJm9Y-legacy.js","./kRtxRAVC-legacy.js","./CLRsmUCp-legacy.js","./CD3Wo88K-legacy.js","./BdE9oIee-legacy.js","./CY34_Xl6-legacy.js","./CEO7by7P-legacy.js","./BcA2x2qS-legacy.js","./DscWBl3V-legacy.js","./DJpcKh2s-legacy.js","./DWFv6n_G-legacy.js"],function(e,a){"use strict";var t,o,l,n,u,i,d,r,s,c,b,v,g,p,_,y,k,f,x,h,m,w,V,j,L,U,T,$,q,S,D,E,K,A,C,F,M,N;return{setters:[e=>{t=e.d,o=e.aj,l=e.ak,n=e.J,u=e.r,i=e.x,d=e.y,r=e.c,s=e.h,c=e.a,b=e.b,v=e.e,g=e.w,p=e.T,_=e.al,y=e.N,k=e.o,f=e.K,x=e.Q,h=e.F,m=e.l,w=e.t,V=e.S,j=e.R,L=e.V},e=>{U=e._,T=e.i},e=>{$=e._},e=>{q=e._},e=>{S=e._,D=e.a},e=>{E=e.s,K=e.a},e=>{A=e.$,C=e.a},e=>{F=e.y,M=e.u},e=>{N=e.u},null,null],execute:function(){const a={key:0,class:"relative flex flex-col w-full max-w-3xl p-3 mx-auto overflow-hidden"},J={class:"flex justify-center py-4"},z=["value"],B=["value"],G={class:"flex flex-col gap-8 pb-4"};e("default",t({__name:"books",async setup(e){let t,H;const O=o(),{data:P,pending:Q}=([t,H]=l(()=>N(`/api/user/books/${O.params.id}`,"$zf7YHpGOWq")),t=await t,H(),t),R=n(),W=u(!1);let Y=u("");const I=u(new A(F(P.value.book_start_date).year,F(P.value.book_start_date).month,F(P.value.book_start_date).day)),X=u(P.value.book_end_date||""===P.value.book_end_date?new A(F(P.value.book_end_date).year,F(P.value.book_end_date).month,F(P.value.book_end_date).day):""),Z=u(),ee=u(),ae=u(""),te=i({book_author:"",book_image:"",book_start_date:ee.value,book_end_date:ae.value,book_title:"",booklist:!1,kind_of_book:"",notes:""});async function oe(){W.value=!0,$fetch(`/api/user/books/${O.params.id}/books`,{method:"PUT",body:te}).then(async()=>{await L("/dashboard/mind")}).catch(async e=>{R.error("Failed to update","Try again"),console.log(e),Y.value=e.statusMessage,W.value=!1})}async function le(){W.value=!0,$fetch(`/api/user/books/${O.params.id}`,{method:"DELETE",body:te}).then(async()=>{await L("/dashboard/mind")}).catch(async e=>{R.error("Failed to delete","Try again"),console.log(e),Y.value=e.statusMessage,W.value=!1})}return d(X,()=>{X.value?.year&&X.value?.month&&X.value?.day&&(Z.value=new A(X.value?.year,X.value?.month,X.value?.day),ae.value=M(Z.value.toDate(C()))??"",te.book_end_date=ae.value)},{immediate:!0}),d(I,()=>{ee.value=M(I.value.toDate(C()))??"",te.book_start_date=ee.value},{immediate:!0}),P.value&&(te.book_author=P.value.book_author,te.book_start_date=ee.value,te.book_end_date=ae.value,te.book_image=P.value.book_image,te.book_title=P.value.book_title,te.booklist="true"===P.value.booklist,te.kind_of_book=P.value.kind_of_book,te.notes=P.value.notes),(e,t)=>{const o=_,l=U,n=$,u=q,i=S,d=D,L=y("motion");return c(Q)?s("",!0):(k(),r("div",a,[b("div",J,[v(o,{class:"object-cover h-60",src:c(P)?.book_image,format:"webp",preload:"",loading:"eager","fetch-priority":"high"},null,8,["src"])]),v(p,{name:"slide-up",mode:"out-in"},{default:g(()=>[b("form",{onSubmit:f(oe,["prevent"]),class:"space-y-6"},[x((k(),r("div",null,[v(l,{text:"Kind of book"}),x(b("select",{id:"status-select","onUpdate:modelValue":t[0]||(t[0]=e=>c(te).kind_of_book=e),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[t[7]||(t[7]=b("option",{disabled:"",value:""},"Kind of book",-1)),(k(!0),r(h,null,m(c(E),e=>(k(),r("option",{value:e.value,key:e.label},w(e.label),9,z))),128))],512),[[V,c(te).kind_of_book]])])),[[L,{...("inputVarient"in e?e.inputVarient:c(T))()}]]),x((k(),r("div",null,[v(l,{text:"Save for future reads"}),x(b("select",{id:"status-select","onUpdate:modelValue":t[1]||(t[1]=e=>c(te).booklist=e),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[t[8]||(t[8]=b("option",{disabled:"",value:""},"No",-1)),(k(!0),r(h,null,m(c(K),e=>(k(),r("option",{value:e.value,key:e.label},w(e.label),9,B))),128))],512),[[V,c(te).booklist]])])),[[L,{...("inputVarient"in e?e.inputVarient:c(T))()}]]),x((k(),r("div",null,[v(l,{text:"Title"}),x(b("input",{id:"text",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>c(te).book_title=e),placeholder:"Title",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[j,c(te).book_title]])])),[[L,{...("inputVarient"in e?e.inputVarient:c(T))()}]]),x((k(),r("div",null,[v(l,{text:"Author"}),x(b("input",{id:"text",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>c(te).book_author=e),placeholder:"Author",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[j,c(te).book_author]])])),[[L,{...("inputVarient"in e?e.inputVarient:c(T))()}]]),x((k(),r("div",null,[v(l,{text:"Notes"}),x(b("textarea",{id:"text",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>c(te).notes=e),placeholder:"Book notes",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[j,c(te).notes]])])),[[L,{...("inputVarient"in e?e.inputVarient:c(T))()}]]),x((k(),r("div",null,[v(l,{text:"Start"}),v(n,{modelValue:I.value,"onUpdate:modelValue":t[5]||(t[5]=e=>I.value=e),icon:"i-lucide-calendar"},null,8,["modelValue"])])),[[L,{...("inputVarient"in e?e.inputVarient:c(T))()}]]),x((k(),r("div",null,[v(l,{text:"End"}),v(n,{modelValue:X.value,"onUpdate:modelValue":t[6]||(t[6]=e=>X.value=e),icon:"i-lucide-calendar"},null,8,["modelValue"])])),[[L,{...("inputVarient"in e?e.inputVarient:c(T))()}]]),b("div",G,[v(u,{text:"Save",isLoading:W.value},null,8,["isLoading"]),v(i,{text:"Cancel",path:"/dashboard/mind",isLoading:W.value},null,8,["isLoading"]),v(d,{onClick:le,text:"Delete",isLoading:W.value},null,8,["isLoading"])])],32)]),_:1})]))}}}))}}});

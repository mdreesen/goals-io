import{e as Q,am as R,J as Z,f as z,r as _,s as G,v as T,c as i,i as H,g as o,a as d,b as s,w as W,T as X,a2 as Y,O as ee,o as u,L as te,N as r,F as E,k as N,t as B,Q as C,P as w,a5 as M}from"./B-MK43wj.js";import{_ as oe}from"./CBOZ2bs1.js";import{_ as ae}from"./olCKdRfx.js";import{_ as ne}from"./DBvWys6H.js";import{_ as le,a as se}from"./BU8lIm5o.js";import{i as v}from"./THmtR4Dj.js";import{s as ie,a as ue}from"./DT5Jmtze.js";import{$ as V,b as F}from"./CAUXnKsr.js";import{y as c,u as q}from"./BGMpC11e.js";import{u as re}from"./B3BFacm9.js";const de={key:0,class:"relative flex flex-col w-full max-w-3xl p-3 mx-auto overflow-hidden"},be={class:"flex justify-center py-4"},pe=["value"],me=["value"],_e={class:"flex flex-col gap-8 pb-4"},$e=Q({__name:"index",async setup(ve){let g,D;const h=R(),{data:l,pending:A}=([g,D]=Z(()=>re(`/api/user/books/${h.params.id}`,"$ND7J8I3TbZ")),g=await g,D(),g),{fetch:$}=z(),b=_(!1);let L=_("");const k=_(new V(c(l.value.book_start_date).year,c(l.value.book_start_date).month,c(l.value.book_start_date).day)),p=_(l.value.book_end_date||l.value.book_end_date===""?new V(c(l.value.book_end_date).year,c(l.value.book_end_date).month,c(l.value.book_end_date).day):""),S=_(),x=_(),y=_(),e=G({book_author:"",book_image:"",book_start_date:x.value,book_end_date:y.value,book_title:"",booklist:!1,kind_of_book:"",notes:""});T(p,()=>{p.value?.year&&p.value?.month&&p.value?.day&&(S.value=new V(p.value?.year,p.value?.month,p.value?.day),y.value=q(S.value.toDate(F()))??"",e.book_end_date=y.value)},{immediate:!0}),T(k,()=>{x.value=q(k.value.toDate(F()))??"",e.book_start_date=x.value},{immediate:!0}),l.value&&(e.book_author=l.value.book_author,e.book_start_date=x.value,e.book_end_date=y.value,e.book_image=l.value.book_image,e.book_title=l.value.book_title,e.booklist=l.value.booklist==="true",e.kind_of_book=l.value.kind_of_book,e.notes=l.value.notes);async function I(){b.value=!0,$fetch(`/api/user/books/${h.params.id}/books`,{method:"PUT",body:e}).then(async()=>{await $(),await M("/dashboard/mind"),b.value=!1}).catch(async a=>{console.log(a),L.value=a.statusMessage,b.value=!1})}async function j(){b.value=!0,$fetch(`/api/user/books/${h.params.id}`,{method:"DELETE",body:e}).then(async()=>{await $(),b.value=!1,await M("/dashboard/mind")}).catch(async a=>{console.log(a),L.value=a.statusMessage,b.value=!1})}return(a,n)=>{const J=Y,f=oe,U=ae,K=ne,P=le,O=se,m=ee("motion");return o(A)?H("",!0):(u(),i("div",de,[d("div",be,[s(J,{class:"object-cover h-60",src:o(l)?.book_image},null,8,["src"])]),s(X,{name:"slide-up",mode:"out-in"},{default:W(()=>[d("form",{onSubmit:te(I,["prevent"]),class:"space-y-6"},[r((u(),i("div",null,[n[8]||(n[8]=d("label",{for:"text",class:"block text-sm font-medium text-gray-300 mb-1"},"Kind of book",-1)),r(d("select",{id:"status-select","onUpdate:modelValue":n[0]||(n[0]=t=>o(e).kind_of_book=t),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[n[7]||(n[7]=d("option",{disabled:"",value:""},"Kind of book",-1)),(u(!0),i(E,null,N(o(ie),t=>(u(),i("option",{value:t.value,key:t.label},B(t.label),9,pe))),128))],512),[[C,o(e).kind_of_book]])])),[[m,{...("inputVarient"in a?a.inputVarient:o(v))()}]]),r((u(),i("div",null,[s(f,{text:"Save for future reads"}),r(d("select",{id:"status-select","onUpdate:modelValue":n[1]||(n[1]=t=>o(e).booklist=t),required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},[n[9]||(n[9]=d("option",{disabled:"",value:""},"No",-1)),(u(!0),i(E,null,N(o(ue),t=>(u(),i("option",{value:t.value,key:t.label},B(t.label),9,me))),128))],512),[[C,o(e).booklist]])])),[[m,{...("inputVarient"in a?a.inputVarient:o(v))()}]]),r((u(),i("div",null,[s(f,{text:"Title"}),r(d("input",{id:"text",type:"text","onUpdate:modelValue":n[2]||(n[2]=t=>o(e).book_title=t),placeholder:"Title",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[w,o(e).book_title]])])),[[m,{...("inputVarient"in a?a.inputVarient:o(v))()}]]),r((u(),i("div",null,[s(f,{text:"Author"}),r(d("input",{id:"text",type:"text","onUpdate:modelValue":n[3]||(n[3]=t=>o(e).book_author=t),placeholder:"Author",required:"",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[w,o(e).book_author]])])),[[m,{...("inputVarient"in a?a.inputVarient:o(v))()}]]),r((u(),i("div",null,[s(f,{text:"Notes"}),r(d("textarea",{id:"text",type:"text","onUpdate:modelValue":n[4]||(n[4]=t=>o(e).notes=t),placeholder:"Book notes",class:"w-full rounded-xl border border-gray-600 bg-gray-700/50 py-3 px-4 text-lg text-white shadow-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[w,o(e).notes]])])),[[m,{...("inputVarient"in a?a.inputVarient:o(v))()}]]),r((u(),i("div",null,[s(f,{text:"Start"}),s(U,{modelValue:k.value,"onUpdate:modelValue":n[5]||(n[5]=t=>k.value=t),icon:"i-lucide-calendar"},null,8,["modelValue"])])),[[m,{...("inputVarient"in a?a.inputVarient:o(v))()}]]),r((u(),i("div",null,[s(f,{text:"End"}),s(U,{modelValue:p.value,"onUpdate:modelValue":n[6]||(n[6]=t=>p.value=t),icon:"i-lucide-calendar"},null,8,["modelValue"])])),[[m,{...("inputVarient"in a?a.inputVarient:o(v))()}]]),d("div",_e,[s(K,{text:"Save",isLoading:b.value},null,8,["isLoading"]),s(P,{text:"Cancel",path:"/dashboard/mind",isLoading:b.value},null,8,["isLoading"]),s(O,{onClick:j,text:"Delete",isLoading:b.value},null,8,["isLoading"])])],32)]),_:1})]))}}});export{$e as default};
